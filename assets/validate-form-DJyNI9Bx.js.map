{"version":3,"file":"validate-form-DJyNI9Bx.js","sources":["../../src/classes/validate-form/validate-form.js","../../src/modules/validate-form.js"],"sourcesContent":["import \"./validate-form.css\";\r\n\r\nexport default class ValidateForm {\r\n  constructor(selector, settings = {}) {\r\n    const mainSelector = document.querySelector(selector);\r\n    if (!mainSelector) return;\r\n\r\n    this.settings = settings;\r\n    this.inputs = mainSelector.querySelectorAll(\".validate-input\");\r\n    this.submitButton = mainSelector.querySelector(\".validate-btn\");\r\n\r\n    this.submitButton.disabled = true;\r\n    this.settingsArr = settings.inputSetingsArr;\r\n    this.defaultMessage = settings.defaultMessage;\r\n\r\n    this.filteredInputs = [...this.inputs].filter((input) => {\r\n      const hasRequired = input.hasAttribute(\"required\");\r\n      const hasClass = this.settingsArr.some((setting) =>\r\n        input.classList.contains(setting.selector)\r\n      );\r\n      return hasRequired || hasClass;\r\n    });\r\n\r\n    this.addValidationListeners();\r\n  }\r\n\r\n  addValidationListeners() {\r\n    this.filteredInputs.forEach((input) => {\r\n      input.addEventListener(\"input\", () => this.validateInput(input));\r\n    });\r\n  }\r\n\r\n  validateInput(input) {\r\n    this.removeErrorMessage(input);\r\n\r\n    const setting = this.settingsArr.find((s) =>\r\n      input.classList.contains(s.selector)\r\n    );\r\n\r\n    let isValid = true;\r\n    let errorMessage = \"\";\r\n\r\n    if (setting && setting.regExp) {\r\n      isValid = setting.regExp.test(input.value);\r\n      errorMessage = isValid ? \"\" : setting.errorMessage || this.defaultMessage;\r\n    } else {\r\n      if (input.value.trim().length < 2 || input.value.trim().length > 40) {\r\n        isValid = false;\r\n        errorMessage = setting ? setting.errorMessage : this.defaultMessage;\r\n      }\r\n    }\r\n\r\n    if (!isValid) {\r\n      this.showErrorMessage(input, errorMessage);\r\n      this.submitButton.disabled = true;\r\n    } else {\r\n      this.checkAllInputsValidity();\r\n    }\r\n  }\r\n\r\n  showErrorMessage(input, message) {\r\n    const errorDiv = document.createElement(\"div\");\r\n    errorDiv.className = this.settings.errorClass || \"error-message\";\r\n    errorDiv.textContent = message;\r\n\r\n    input.parentNode.insertBefore(errorDiv, input.nextSibling);\r\n  }\r\n\r\n  removeErrorMessage(input) {\r\n    const existingError = input.parentNode.querySelector(\r\n      this.settings.errorClass\r\n        ? `.${this.settings.errorClass}`\r\n        : \".error-message\"\r\n    );\r\n    if (existingError) {\r\n      existingError.remove();\r\n    }\r\n  }\r\n\r\n  checkAllInputsValidity() {\r\n    const allValid = this.filteredInputs.every((input) => {\r\n      const setting = this.settingsArr.find((s) =>\r\n        input.classList.contains(s.selector)\r\n      );\r\n\r\n      if (setting && setting.regExp) {\r\n        return setting.regExp.test(input.value);\r\n      } else {\r\n        return (\r\n          input.value.trim().length >= 2 && input.value.trim().length <= 40\r\n        );\r\n      }\r\n    });\r\n\r\n    this.submitButton.disabled = !allValid;\r\n  }\r\n}\r\n","import ValidateForm from \"./../classes/validate-form/validate-form\";\r\n\r\nexport function validateForm() {\r\n  const form = new ValidateForm(\".new-form-validate\", {\r\n    errorClass: \"error\",\r\n    defaultMessage: \"Неправильно\",\r\n    inputSetingsArr: [\r\n      {\r\n        selector: \"email-input\",\r\n        errorMessage: \"Неверный формат email\",\r\n        regExp: null,\r\n      },\r\n      {\r\n        selector: \"phone-input\",\r\n        errorMessage: \"Неправильный телефон\",\r\n        regExp: /^\\+7\\d{10}$/,\r\n      },\r\n    ],\r\n  });\r\n}\r\n"],"names":["ValidateForm","selector","settings","mainSelector","input","hasRequired","hasClass","setting","s","isValid","errorMessage","message","errorDiv","existingError","allValid","validateForm"],"mappings":"AAEe,MAAMA,CAAa,CAChC,YAAYC,EAAUC,EAAW,GAAI,CACnC,MAAMC,EAAe,SAAS,cAAcF,CAAQ,EAC/CE,IAEL,KAAK,SAAWD,EAChB,KAAK,OAASC,EAAa,iBAAiB,iBAAiB,EAC7D,KAAK,aAAeA,EAAa,cAAc,eAAe,EAE9D,KAAK,aAAa,SAAW,GAC7B,KAAK,YAAcD,EAAS,gBAC5B,KAAK,eAAiBA,EAAS,eAE/B,KAAK,eAAiB,CAAC,GAAG,KAAK,MAAM,EAAE,OAAQE,GAAU,CACvD,MAAMC,EAAcD,EAAM,aAAa,UAAU,EAC3CE,EAAW,KAAK,YAAY,KAAMC,GACtCH,EAAM,UAAU,SAASG,EAAQ,QAAQ,CACjD,EACM,OAAOF,GAAeC,CAC5B,CAAK,EAED,KAAK,uBAAsB,EAC5B,CAED,wBAAyB,CACvB,KAAK,eAAe,QAASF,GAAU,CACrCA,EAAM,iBAAiB,QAAS,IAAM,KAAK,cAAcA,CAAK,CAAC,CACrE,CAAK,CACF,CAED,cAAcA,EAAO,CACnB,KAAK,mBAAmBA,CAAK,EAE7B,MAAMG,EAAU,KAAK,YAAY,KAAMC,GACrCJ,EAAM,UAAU,SAASI,EAAE,QAAQ,CACzC,EAEI,IAAIC,EAAU,GACVC,EAAe,GAEfH,GAAWA,EAAQ,QACrBE,EAAUF,EAAQ,OAAO,KAAKH,EAAM,KAAK,EACzCM,EAAeD,EAAU,GAAKF,EAAQ,cAAgB,KAAK,iBAEvDH,EAAM,MAAM,KAAI,EAAG,OAAS,GAAKA,EAAM,MAAM,OAAO,OAAS,MAC/DK,EAAU,GACVC,EAAeH,EAAUA,EAAQ,aAAe,KAAK,gBAIpDE,EAIH,KAAK,uBAAsB,GAH3B,KAAK,iBAAiBL,EAAOM,CAAY,EACzC,KAAK,aAAa,SAAW,GAIhC,CAED,iBAAiBN,EAAOO,EAAS,CAC/B,MAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,KAAK,SAAS,YAAc,gBACjDA,EAAS,YAAcD,EAEvBP,EAAM,WAAW,aAAaQ,EAAUR,EAAM,WAAW,CAC1D,CAED,mBAAmBA,EAAO,CACxB,MAAMS,EAAgBT,EAAM,WAAW,cACrC,KAAK,SAAS,WACV,IAAI,KAAK,SAAS,UAAU,GAC5B,gBACV,EACQS,GACFA,EAAc,OAAM,CAEvB,CAED,wBAAyB,CACvB,MAAMC,EAAW,KAAK,eAAe,MAAOV,GAAU,CACpD,MAAMG,EAAU,KAAK,YAAY,KAAMC,GACrCJ,EAAM,UAAU,SAASI,EAAE,QAAQ,CAC3C,EAEM,OAAID,GAAWA,EAAQ,OACdA,EAAQ,OAAO,KAAKH,EAAM,KAAK,EAGpCA,EAAM,MAAM,KAAM,EAAC,QAAU,GAAKA,EAAM,MAAM,OAAO,QAAU,EAGzE,CAAK,EAED,KAAK,aAAa,SAAW,CAACU,CAC/B,CACH,CC9FO,SAASC,GAAe,CAChB,IAAIf,EAAa,qBAAsB,CAClD,WAAY,QACZ,eAAgB,cAChB,gBAAiB,CACf,CACE,SAAU,cACV,aAAc,wBACd,OAAQ,IACT,EACD,CACE,SAAU,cACV,aAAc,uBACd,OAAQ,aACT,CACF,CACL,CAAG,CACH"}