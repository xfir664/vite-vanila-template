class n{constructor(t,e={}){const s=document.querySelector(t);s&&(this.settings=e,this.inputs=s.querySelectorAll(".validate-input"),this.submitButton=s.querySelector(".validate-btn"),this.submitButton.disabled=!0,this.settingsArr=e.inputSetingsArr,this.defaultMessage=e.defaultMessage,this.filteredInputs=[...this.inputs].filter(r=>{const i=r.hasAttribute("required"),a=this.settingsArr.some(l=>r.classList.contains(l.selector));return i||a}),this.addValidationListeners())}addValidationListeners(){this.filteredInputs.forEach(t=>{t.addEventListener("input",()=>this.validateInput(t))})}validateInput(t){this.removeErrorMessage(t);const e=this.settingsArr.find(i=>t.classList.contains(i.selector));let s=!0,r="";e&&e.regExp?(s=e.regExp.test(t.value),r=s?"":e.errorMessage||this.defaultMessage):(t.value.trim().length<2||t.value.trim().length>40)&&(s=!1,r=e?e.errorMessage:this.defaultMessage),s?this.checkAllInputsValidity():(this.showErrorMessage(t,r),this.submitButton.disabled=!0)}showErrorMessage(t,e){const s=document.createElement("div");s.className=this.settings.errorClass||"error-message",s.textContent=e,t.parentNode.insertBefore(s,t.nextSibling)}removeErrorMessage(t){const e=t.parentNode.querySelector(this.settings.errorClass?`.${this.settings.errorClass}`:".error-message");e&&e.remove()}checkAllInputsValidity(){const t=this.filteredInputs.every(e=>{const s=this.settingsArr.find(r=>e.classList.contains(r.selector));return s&&s.regExp?s.regExp.test(e.value):e.value.trim().length>=2&&e.value.trim().length<=40});this.submitButton.disabled=!t}}function d(){new n(".new-form-validate",{errorClass:"error",defaultMessage:"Неправильно",inputSetingsArr:[{selector:"email-input",errorMessage:"Неверный формат email",regExp:null},{selector:"phone-input",errorMessage:"Неправильный телефон",regExp:/^\+7\d{10}$/}]})}export{d as validateForm};
//# sourceMappingURL=validate-form-DJyNI9Bx.js.map
